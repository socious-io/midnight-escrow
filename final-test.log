
> simple-counter-test@1.0.0 deploy
> tsx deploy.ts

üöÄ Escrow Contract Deploy

üìç No contract address found, will deploy new contract

[1/5] Building wallet...
‚úÖ Wallet: mn_shield-addr_test10p5tlytz2ec3x9ds4f8vqpprxg5v6apklt67zjht20c2jfkn9d9sxqzwaphvq928mqcupnt37vhhzqxak3fp9scrhypu3yq4z5403lsu6vp4w9es
   Balance: 1959629104 tDUST

[2/5] Creating providers...
‚úÖ Providers ready

[3/5] Deploying escrow contract...
‚úÖ DEPLOYED in 74.08s
   Address: 02002fc40059229947967af990de71d858c7085b6399c2ab37f4369f00e5d7b51cee
   Block: 2155912

‚úÖ Saved to deployment.json
‚úÖ Added CONTRACT_ADDRESS to .env

üîÑ Restarting to join and interact with contract...


> simple-counter-test@1.0.0 deploy
> tsx deploy.ts

üöÄ Escrow Contract Deploy

üìç Using existing contract: 02002fc40059229947967af990de71d858c7085b6399c2ab37f4369f00e5d7b51cee

[1/5] Building wallet...
‚úÖ Wallet: mn_shield-addr_test10p5tlytz2ec3x9ds4f8vqpprxg5v6apklt67zjht20c2jfkn9d9sxqzwaphvq928mqcupnt37vhhzqxak3fp9scrhypu3yq4z5403lsu6vp4w9es
   Balance: 1958768295 tDUST

[2/5] Creating providers...
‚úÖ Providers ready

[3/5] Skipping deployment, using existing contract

[4/5] Testing join (to verify indexer works)...
‚úÖ JOIN worked in 0.88s

[5/5] Initial contract state:
   Last escrow ID: 0
   Instance counter: 1

[6/6] Creating escrow with 10 tDUST...
   Contributor: mn_shield-addr_test1x08854vlcnjk9wtt95ejz5wk2sd8s6w8lqu0jlsryak9j58qd8qsxqrzffwamyq2z4xuj95snfj06g0p8gpggq0jc0raxq8dpg4f2y9ucqvkdw46
   Parsed coin public key bytes length: 32
   Creating escrow with:
   - Amount: 10000000 (10 tDUST)
   - Contributor bytes: 32
   - Fee: 0
   ‚è≥ Proof generation may take 5-10 minutes...
   - Generated coin with random nonce (32 bytes)
   ‚è±Ô∏è  Proof generated in 119.51s
‚úÖ Created escrow ID: [object Object]
   Last escrow ID: 1

[7/7] Testing release to contributor...
   ‚è≥ Releasing escrow ID 1 (proof may take 2-3 minutes)...
‚ùå Error: Error: invalid index into sparse merkle tree: 0 -- write creating spend proof
    at __wbindgen_error_new (file:///home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/ledger/midnight_ledger_wasm_bg.js:7821:17)
    at wasm://wasm/0152566a:wasm-function[4615]:0x4fea6e
    at wasm://wasm/0152566a:wasm-function[3042]:0x443400
    at wasm://wasm/0152566a:wasm-function[4115]:0x473670
    at UnprovenInput.newContractOwned (file:///home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/ledger/midnight_ledger_wasm_bg.js:6016:26)
    at <anonymous> (/home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/midnight-js-contracts/src/utils/zswap-utils.ts:148:23)
    at Array.forEach (<anonymous>)
    at zswapStateToOffer (/home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/midnight-js-contracts/src/utils/zswap-utils.ts:127:26)
    at createUnprovenLedgerCallTx (/home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/midnight-js-contracts/src/utils/ledger-utils.ts:131:5)
    at createUnprovenCallTxFromInitialStates (/home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/midnight-js-contracts/src/unproven-call-tx.ts:85:19)
