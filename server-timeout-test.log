
> simple-counter-test@1.0.0 deploy
> tsx deploy.ts

üöÄ Escrow Contract Deploy

üìç Using existing contract: 020092824e225b6439a1c8aa36c207402e8e120129ec067f3c71adada85ad95ab1a6

[1/5] Building wallet...
‚úÖ Wallet: mn_shield-addr_test10p5tlytz2ec3x9ds4f8vqpprxg5v6apklt67zjht20c2jfkn9d9sxqzwaphvq928mqcupnt37vhhzqxak3fp9scrhypu3yq4z5403lsu6vp4w9es
   Balance: 1947714338 tDUST

[2/5] Creating providers...
‚úÖ Providers ready

[3/5] Skipping deployment, using existing contract

[4/5] Testing join (to verify indexer works)...
‚úÖ JOIN worked in 1.13s

[5/5] Initial contract state:
   Last escrow ID: 0
   Instance counter: 1

[6/6] Creating escrow with 10 tDUST...
   Contributor: mn_shield-addr_test1x08854vlcnjk9wtt95ejz5wk2sd8s6w8lqu0jlsryak9j58qd8qsxqrzffwamyq2z4xuj95snfj06g0p8gpggq0jc0raxq8dpg4f2y9ucqvkdw46
   Parsed coin public key bytes length: 32
   Creating escrow with:
   - Amount: 10000000 (10 tDUST)
   - Contributor bytes: 32
   - Selected wallet coin with value: 999703825
   - Coin mt_index: 45660
   ‚è≥ Proof generation may take 5-10 minutes...
   ‚è±Ô∏è  Proof generated in 169.03s
‚úÖ Created escrow ID: [object Object]
   Last escrow ID: 1

[7/7] Testing release to contributor...
   ‚è≥ Releasing escrow ID 1 (proof may take 2-3 minutes)...
‚ùå Error: Error: invalid index into sparse merkle tree: 45660 -- write creating spend proof
    at __wbindgen_error_new (file:///home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/ledger/midnight_ledger_wasm_bg.js:7821:17)
    at wasm://wasm/0152566a:wasm-function[4615]:0x4fea6e
    at wasm://wasm/0152566a:wasm-function[3042]:0x443400
    at wasm://wasm/0152566a:wasm-function[4115]:0x473670
    at UnprovenInput.newContractOwned (file:///home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/ledger/midnight_ledger_wasm_bg.js:6016:26)
    at <anonymous> (/home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/midnight-js-contracts/src/utils/zswap-utils.ts:148:23)
    at Array.forEach (<anonymous>)
    at zswapStateToOffer (/home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/midnight-js-contracts/src/utils/zswap-utils.ts:127:26)
    at createUnprovenLedgerCallTx (/home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/midnight-js-contracts/src/utils/ledger-utils.ts:131:5)
    at createUnprovenCallTxFromInitialStates (/home/jeyem/Socious/simple-counter-test/node_modules/@midnight-ntwrk/midnight-js-contracts/src/unproven-call-tx.ts:85:19)
